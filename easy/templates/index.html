<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>自研测试平台从入门到放弃</title>
    {% load static %}

    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">

    <link rel="icon" href="{% static 'images/favicon%202.ico' %}">

    <link rel="stylesheet" href="{% static 'layui2.5.5/css/layui.css' %}">
    <link rel="stylesheet" href="{% static 'css/index.css' %}">
    <link rel="stylesheet" href="{% static 'font-awesome-4.7.0/css/font-awesome.min.css' %}">

    <script src="{% static 'layui2.5.5/layui.js' %}"></script>
    <script src="{% static 'js/index.js' %}"></script>
    <script src="{% static 'js/cache.js' %}"></script>
</head>

<body class="main_body">
<div class="layui-layout layui-layout-admin">
    <!-- 顶部 -->
    <div class="layui-header header" style="background-color: #FFFFFF!important;color: #0C0C0C!important;width: 200px;">
        <div class="layui-main">
            <span><i href="javascript:;" class="seraph hideMenu layui-icon layui-icon-shrink-right"></i></span>
            <span  class="logo my_logo bubbling functionSetting" title="更多功能">自动化测试平台</span>
            <!-- 清楚缓存的class：clearCache -->
        </div>
    </div>
    <!-- 左侧导航 -->
    <div class="layui-side layui-bg-black">
        <div class="user-photo">
{#            <a class="img lockcms" title="点我将会锁屏哦(#^.^#)">#}
{#                <div>占豪</div>#}
{#                <img src="./../static/images/dingding.jpg" class="userAvatar">#}
{#            </a>#}
            <a class="img lockcms" title="点我将会锁屏哦(#^.^#)">
                <img src="./../static/images/index_img.jpg" style="height: 100px;border-radius: 50%;" class="userAvatar">
            </a>
            <a href="/logout/" class="fa fa-sign-out my_logout" title="退出系统"></a>
            <div><span class="my_loginer">钉钉用户：朱占豪</span></div>
        </div>


        <div class="navBar layui-side-scroll" id="navBar">
            <ul class="layui-nav layui-nav-tree">
                <li class="layui-nav-item layui-this">
                    <a href="javascript:;" data-url="/web_welcome/">
                        <i class="layui-icon"></i><cite>首页</cite>
                    </a>
                </li>
            </ul>
            <div class="clock">
                <div class="flip">
                    <div class="digital front" data-number="0"></div>
                    <div class="digital back" data-number="1"></div>
                </div>
                <div class="flip">
                    <div class="digital front" data-number="0"></div>
                    <div class="digital back" data-number="1"></div>
                </div>
                <em class="divider">:</em>
                <div class="flip">
                    <div class="digital front" data-number="0"></div>
                    <div class="digital back" data-number="1"></div>
                </div>
                <div class="flip">
                    <div class="digital front" data-number="0"></div>
                    <div class="digital back" data-number="1"></div>
                </div>
                <em class="divider">:</em>
                <div class="flip">
                    <div class="digital front" data-number="0"></div>
                    <div class="digital back" data-number="1"></div>
                </div>
                <div class="flip">
                    <div class="digital front" data-number="0"></div>
                    <div class="digital back" data-number="1"></div>
                </div>
            </div>
        </div>

    </div>
    <!-- 右侧内容 -->
    <div class="layui-body layui-form">
        <div class="layui-tab mag0" lay-filter="bodyTab" id="top_tabs_box">
            <ul class="layui-tab-title top_tab" id="top_tabs">
                <li class="layui-this" lay-id=""><i class="layui-icon">&#xe68e;</i> <cite>首页</cite></li>
            </ul>
            <ul class="layui-nav closeBox">
                <li class="layui-nav-item">
                    <a href="javascript:;"><i class="layui-icon caozuo">&#xe643;</i> 页面操作</a>
                    <dl class="layui-nav-child">
                        <dd><a href="javascript:;" class="refresh refreshThis"><i class="layui-icon"></i> 刷新当前</a></dd>
                        <dd><a href="javascript:;" class="closePageOther"><i class="seraph icon-prohibit"></i> 关闭其他</a>
                        </dd>
                        <dd><a href="javascript:;" class="closePageAll"><i class="seraph icon-guanbi"></i> 关闭全部</a></dd>
                    </dl>
                </li>
            </ul>

            <div class="layui-tab-content clildFrame">
                <div class="layui-tab-item layui-show">
                    <iframe src="/home/"></iframe>
                </div>
            </div>

        </div>
    </div>
</div>

<script>
    //字体冒泡
    "use strict";
    // For a better performance, use requestAnimationFrame instead of setInterval
    // https://css-tricks.com/snippets/javascript/replacements-setinterval-using-requestanimationframe/
    var requestInterval = function (fn, delay) {
        var start = new Date().getTime();
        var handle = {value: 0};
        var loop = function () {
            handle.value = requestAnimationFrame(loop);
            var current = new Date().getTime();
            var delta = current - start;
            if (delta >= delay) {
                fn();
                start = new Date().getTime();
            }
        };
        handle.value = requestAnimationFrame(loop);
        return handle;
    };
    var sample = function (arr) {
        return arr[Math.floor(Math.random() * arr.length)];
    };
    var bubbleSizes = [3, 6, 9, 12];
    var bubbleText = document.querySelector(".bubbling");
    var bubblePositions = Array.from(Array(bubbleText.offsetWidth).keys());
    requestInterval(function () {
        var bubbleSize = sample(bubbleSizes);
        var bubblePosition = sample(bubblePositions);
        var bubble = document.createElement("div");
        bubble.className = "bubble";
        bubble.style.width = bubbleSize + "px";
        bubble.style.height = bubbleSize + "px";
        bubble.style.left = bubblePosition + "px";
        bubbleText.append(bubble);
        var bubbleAnimation = bubble.animate([{bottom: "10px", opacity: 1}, {bottom: "180%", opacity: 0.6}], {
            fill: "forwards",
            duration: 3000
        });
        bubbleAnimation.onfinish = function () {
            return bubble.remove();
        };
    }, 300);
</script>
<script>
    //时钟
    "use strict";
    var Flipper = /** @class */ (function () {
        function Flipper(node, currentTime, nextTime) {
            this.isFlipping = false;
            this.duration = 600;
            this.flipNode = node;
            this.frontNode = node.querySelector(".front");
            this.backNode = node.querySelector(".back");
            this.setFrontTime(currentTime);
            this.setBackTime(nextTime);
        }

        Flipper.prototype.setFrontTime = function (time) {
            this.frontNode.dataset.number = time;
        };
        Flipper.prototype.setBackTime = function (time) {
            this.backNode.dataset.number = time;
        };
        Flipper.prototype.flipDown = function (currentTime, nextTime) {
            var _this = this;
            if (this.isFlipping) {
                return false;
            }
            this.isFlipping = true;
            this.setFrontTime(currentTime);
            this.setBackTime(nextTime);
            this.flipNode.classList.add("running");
            setTimeout(function () {
                _this.flipNode.classList.remove("running");
                _this.isFlipping = false;
                _this.setFrontTime(nextTime);
            }, this.duration);
        };
        return Flipper;
    }());
    var getTimeFromDate = function (date) {
        return date
            .toTimeString()
            .slice(0, 8)
            .split(":")
            .join("");
    };
    var flips = document.querySelectorAll(".flip");
    var now = new Date();
    var nowTimeStr = getTimeFromDate(new Date(now.getTime() - 1000));
    var nextTimeStr = getTimeFromDate(now);
    var flippers = Array.from(flips).map(function (flip, i) {
        return new Flipper(flip, nowTimeStr[i], nextTimeStr[i]);
    });
    setInterval(function () {
        var now = new Date();
        var nowTimeStr = getTimeFromDate(new Date(now.getTime() - 1000));
        var nextTimeStr = getTimeFromDate(now);
        for (var i = 0; i < flippers.length; i++) {
            if (nowTimeStr[i] === nextTimeStr[i]) {
                continue;
            }
            flippers[i].flipDown(nowTimeStr[i], nextTimeStr[i]);
        }
    }, 1000);
</script>

</body>

</html>